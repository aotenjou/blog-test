---
title: cs106LCallBack
date: 2025-03-11 21:43:24
tags:
- language
---
 <!-- more -->

做完了assign,沿着这条线开始梳理。

### assign1,2

主要涉及**I/O控制**。

##### I/O主要是围绕流进行操作：
- 文件：ifstream输入,ofstream输出,fstream输入输出。
- 内存：istream输入，ostream输出，iostream输入输出。
- 字符串：stringstream输出输出。
- 数组：spanstream输入输出。

1. 状态信息：标志流状态（good()正常/eof()文件末尾/fail()非致命错误/bad()致命错误）。
2. 控制信息：控制*输入/输出*序列格式化的标志以及诸如的区域设置。

**流对象**：stdin和stdout是行缓存；而stderr是无缓存的。cin和cout都是从缓冲区读取。
cin和cout把缓冲区的数据变成流，然后搬运到相应的目的地。cin和cout就是个搬运工，搬运的过程就是流。

##### 与此同时，缓冲区（buffer）

基本机制是：存储信息达到一定量后（**触发IO**）进行一些操作。
缓冲区满时：执行flush语句；执行endl语句；关闭文件。

1. 全缓冲：全满后操作，刷新。
2. 行缓冲：遇到**换行符**操作，刷新。
3. 不带缓冲：直接操作。

C++通过**std::streambuf类**实现缓冲区管理，其核心包含

-  **​字符序列** 与**指针控制**：
    - 读取区（Get Area）​：通过gptr（当前读取位置）、egptr（缓冲区结束位置）指针管理输入数据
    ​- 写入区（Put Area）​：通过pptr（当前写入位置）、epptr（缓冲区结束位置）指针管理输出数据
    - 动态调整：当指针到达缓冲区边界时，触发缓冲区的刷新或填充。

​- 关联字符序列（Associated Sequence）​
    表示**与流绑定的实际数据源或目标**（如文件句柄、内存块）。例如，std::cout的关联序列是标准输出设备，std::stringstream的关联序列是内存字符串

`std：：getline()`:通过gptr->egptr指针控制输入数据的位置.读取字符直到遇到指定的终止符(默认\n).

`std::getchar()`:用户输入字符暂存在**键盘缓冲区**，按回车后数据被复制到标准输入流（stdin）的缓冲区.从缓冲区逐个读取字符，返回其**ASCII码值（int类型）**，缓冲区指针随之移动.

##### 指针初步

